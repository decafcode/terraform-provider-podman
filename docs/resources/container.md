---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "podman_container Resource - terraform-provider-podman"
subcategory: ""
description: |-
  Podman Container resource
---

# podman_container (Resource)

Podman Container resource

## Example Usage

```terraform
locals {
  container_host = "ssh://user@localhost/run/podman/podman.sock#pubkey=ssh-ed25519+AAAAC3NzaC1lZDI1NTE5AAAAIEahKBGUmHUA4MZgJ3pi4vZMfgB1KXbh33WExUh688Jh"
  uid_postgres   = 2001
}

variable "pgpassword" {
  type = string
}

resource "podman_secret" "pgpassword" {
  container_host = local.container_host
  name           = "pgpassword"
  value          = var.pgpassword
  value_version  = 1
}

resource "podman_network" "internal" {
  container_host = local.container_host
  dns_enabled    = true
  internal       = true
  name           = "internal"
}

resource "podman_image" "postgres_17" {
  container_host = local.container_host
  preserve       = true
  reference      = "docker.io/library/postgres:17.5@sha256:6efd0df010dc3cb40d5e33e3ef84acecc5e73161bd3df06029ee8698e5e12c60"
  policy         = "missing"
}

resource "podman_container" "postgres_17" {
  container_host = local.container_host
  image          = podman_image.postgres_17.id
  name           = "postgres-17"
  restart_policy = "always"

  env = {
    "POSTGRES_PASSWORD_FILE" = "/run/secrets/pgpassword"
  }

  mounts = [
    {
      options = ["U", "Z"]
      source  = "/srv/postgres-17"
      target  = "/var/lib/postgresql/data"
    }
  ]

  networks = [
    {
      id = podman_network.internal.id
    }
  ]

  secrets = [
    {
      gid    = local.uid_postgres
      path   = "/run/secrets/pgpassword"
      secret = podman_secret.pgpassword.name
      uid    = local.uid_postgres
    }
  ]

  user = {
    group = local.uid_postgres
    user  = local.uid_postgres
  }
}
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `image` (String) ID of the image to launch inside this container. Pass the `id` attribute of a `podman_image` resource here.

### Optional

- `command` (List of String) Override the default command specified by this container's image.
- `container_host` (String) URL of the container host where this resource resides
- `entrypoint` (List of String) Override the container entry point supplied by the image.
- `env` (Map of String) Environment variables to set in this container. This is in addition to any environment variables specified by the image.
- `labels` (Map of String) Labels to attach to this container in the Podman and Docker API.
- `mounts` (Attributes List) A list of host filesystem locations or block devices to mount into the container's mount namespace.

  The default type is a bind mount (i.e. make a host directory appear inside the container), but other possibilities also exist depending on the value of the `type` attribute.

  See [Podman docs](https://docs.podman.io/en/v5.5.2/markdown/podman-create.1.html#mount-type-type-type-specific-option) for more details, but be sure to also consult the note about the `options` attribute below. (see [below for nested schema](#nestedatt--mounts))
- `name` (String) Name to assign to this container. Other containers on the same Podman network as this container will be able to discover this container's private IP address by looking up its name using DNS. Do note, however, that these DNS lookups do not work on Podman's default network (see description of `networks` below).

  If you do not specify a name here then a random name will be assigned by Podman. Assigning an explicit name is strongly recommended.
- `networks` (Attributes List) A list of Podman networks that this container should join. If this list is omitted or empty then the container will be added to the default Podman network.

  Podman networks allow participating containers to resolve the private IP addresses of other containers on the same network by looking up the names of those containers using DNS: this lookup is performed on just the bare name of the target container without any further qualifying domains.

  For compatibility with Docker this DNS lookup functionality is _not_ provided on Podman's default network. (see [below for nested schema](#nestedatt--networks))
- `port_mappings` (Attributes List) List of ports to expose on the host's external network interfaces. (see [below for nested schema](#nestedatt--port_mappings))
- `restart_policy` (String) The circumstances under which this container should be automatically restarted by Podman.

  If you want your containers to automatically start at boot time then enable the `podman-restart.service` systemd unit on the host. The podman CLI command executed by this unit will automatically start all containers that have a `restart_policy` of `always`.

  Valid values are:

  - `no` (default)
  - `always`
  - `on-failure`
  - `unless-stopped`
- `secret_env` (Map of String) A string-to-string map of Podman secrets to supply to the container as environment variables. The keys are environment variable names, and the values are names or IDs of Podman secrets.
- `secrets` (Attributes List) A list of Podman secrets to mount into the container's filesystem. See `uploads` below for an alternative mechanism that accomplishes a similar goal. (see [below for nested schema](#nestedatt--secrets))
- `selinux_options` (List of String) Specify SELinux labelling options for this container.

  Mostly intended for advanced use cases. Semi-documented in an old version of Podman's documentation under the [--security-opt](https://docs.podman.io/en/v4.6.1/markdown/options/security-opt.html) command line argument. The options starting with `label=` are valid values for this array, but note that you will need to specify these options without the `label=` prefixes.

  The most commonly used value for this option is `["disable"]`, which disables SELinux labelling. This lowers the security of the container, but it can be useful if you need to give the container access to Podman's API socket, since the standard SELinux policy will not let you do this by default even if you use the `Z` mount option when mounting the socket.
- `start_immediately` (Boolean) Whether to immediately start this container after it has been created and the `uploads` attribute has been processed. Default is `true`.
- `uploads` (Attributes List) A list of files to upload to this container. Files uploaded during container creation will be uploaded before the container is started, if applicable. Changes to this attribute will result in the changed files being re-uploaded to the existing container.

  File content is not stored as part of Terraform state, so this mechanism can be used to supply secret data to the container such as private keys. However, it should only be used to upload small files, like secrets or configuration. (see [below for nested schema](#nestedatt--uploads))
- `user` (Attributes) The security principal that will be used to launch this container, consisting of a user ID and an optional group ID. Each ID can be specified as either an integer or a name. If a name is used then its corresponding numeric ID will be looked up in the `/etc/passwd` or `/etc/group` file inside the container image as appropriate.

  If this attribute is not specified then the default UID and GID from the image will be used. (see [below for nested schema](#nestedatt--user))
- `user_namespace` (Attributes) (see [below for nested schema](#nestedatt--user_namespace))

### Read-Only

- `id` (String) Container ID assigned by Podman

<a id="nestedatt--mounts"></a>
### Nested Schema for `mounts`

Required:

- `source` (String) Source path on the host filesystem. Must be the empty string for `tmpfs` mounts.
- `target` (String) Destination path inside the container.

Optional:

- `options` (List of String) Mount options as described in the link to Podman's docs above. Note that the documentation for this specific attribute is [here](https://docs.podman.io/en/v5.5.2/markdown/podman-create.1.html#volume-v-source-volume-host-dir-container-dir-options) and not in the section describing mounts. This seems to be a quirk of the Podman API.

  Note: If you are specifying a bind mount (the default mount type) and the host machine has SELinux enabled (which is usually the case, since Podman is typically used from Red Hat based distributions) then you will want to specify `["Z"]` here, otherwise the processes running in the container will be denied access to this mount.
- `type` (String) What kind of mount to create. This affects the meaning of of the other attributes in this object. If this is not specified then the default is `bind`, which is probably what you want in most cases.


<a id="nestedatt--networks"></a>
### Nested Schema for `networks`

Required:

- `id` (String) ID of the Podman network to join.


<a id="nestedatt--port_mappings"></a>
### Nested Schema for `port_mappings`

Required:

- `container_port` (Number) Container port to expose.
- `host_port` (Number) Host port to bind to.

Optional:

- `host_ip` (String) Host IPv4 address to bind to. Binds to all interfaces if omitted.
- `protocols` (List of String) IP protocols to forward. Must be some combination of `tcp`, `udp`, and `sctp`. Defaults to `["tcp"]`.


<a id="nestedatt--secrets"></a>
### Nested Schema for `secrets`

Required:

- `path` (String) Path inside the container to mount the secret. Docker uses the convention `/run/secrets/<secret_name>`, but Podman allows arbitrary paths to be specified.
- `secret` (String) The name or ID of the Podman secret to mount.

Optional:

- `gid` (Number) Numerical group ID that owns the secret file. Defaults to 0 (root). Group names can not be specified here due to Podman API limitations.
- `mode` (Number) The numerical file mode to set on the file that holds the secret. HCL does not have any syntax for octal literals, so you may want to use Terraform's `parseint` function here (e.g. `parseint("400", 8)`). The default value is octal `0400` (i.e. 256 in decimal).
- `uid` (Number) Numerical user ID that owns the secret file. Defaults to 0 (root). User names can not be specified here due to Podman API limitations.


<a id="nestedatt--uploads"></a>
### Nested Schema for `uploads`

Required:

- `content` (String, [Write-only](https://developer.hashicorp.com/terraform/language/resources/ephemeral#write-only-arguments)) The text or binary content to upload to the destination path (see `base64` attribute). This is a write-only attribute, so if you change this attribute then you will need to change the `contents_hash` attribute as well in order to trigger a re-upload.

  Use Terraform's `file(...)` function to set this attribute from a local file. If you have set the `base64` attribute to `true` then you will need to use Terraform's `filebase64(...)` function instead.
- `content_hash` (String) A hash of the value of `contents`. The actual hash algorithm does not matter as long as the hash changes every time the contents change. Changing the value of this attribute will trigger a re-upload of this file.
- `path` (String) The absolute path of the file to create inside the container.

Optional:

- `base64` (Boolean) Set this flag to true to interpret the `contents` attribute as base64-encoded binary data. Otherwise the `contents` attribute will be stored into the target file as UTF-8 text.
- `gid` (Number) The numerical group ID that will own the file that will be created. Defaults to 0 (root). Group names can not be specified here due to Podman API limitations.
- `mode` (Number) The numerical file mode to set on the file that will be created. HCL does not have any syntax for octal literals, so you may want to use Terraform's `parseint` function here (e.g. `parseint("644", 8)`). The default value is octal `0644` (i.e. 420 in decimal).
- `uid` (Number) The numerical user ID that will own the file that will be created. Defaults to 0 (root). User names can not be specified here due to Podman API limitations.


<a id="nestedatt--user"></a>
### Nested Schema for `user`

Required:

- `user` (String) User ID

Optional:

- `group` (String) Group ID


<a id="nestedatt--user_namespace"></a>
### Nested Schema for `user_namespace`

Required:

- `mode` (String)

Optional:

- `options` (List of String)
